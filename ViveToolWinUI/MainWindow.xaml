<Window
    x:Class="ViveToolWinUI.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls">

    <Grid x:Name="RootLayout"
          MinWidth="500" MinHeight="300"
          HorizontalAlignment="Stretch" VerticalAlignment="Stretch">

        <Grid.RowDefinitions>
            <RowDefinition Height="48"/>
            <!-- 标题栏 -->
            <RowDefinition Height="*"/>
            <!-- 内容区 -->
        </Grid.RowDefinitions>

        <!-- 标题栏 -->
        <Grid x:Name="AppTitleBar"
              Grid.Row="0"
              Background="Transparent"
              Padding="12,0,12,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <Image Source="Assets/Square44x44Logo.png"
                       Width="20" Height="20"
                       Margin="0,0,10,0"/>
                <TextBlock Text="ViveTool WinUI"
                           FontSize="16"
                           VerticalAlignment="Center"
                           Style="{StaticResource CaptionTextBlockStyle}"/>
            </StackPanel>

            <AutoSuggestBox x:Name="SearchBox"
                            Grid.Column="1"
                            VerticalAlignment="Center"
                            PlaceholderText="搜索"
                            Width="420"
                            Visibility="Collapsed"/>

            <Button x:Name="AvatarButton"
                    Grid.Column="2"
                    VerticalAlignment="Center"
                    Content="⋯"
                    Visibility="Collapsed"/>
        </Grid>

        <!-- NavigationView 主体 -->
        <muxc:NavigationView x:Name="NavView"
                             Grid.Row="1"
                             HorizontalAlignment="Stretch"
                             VerticalAlignment="Stretch"
                             IsSettingsVisible="True"
                             PaneDisplayMode="Auto"
                             IsBackButtonVisible="Visible"
                             IsBackEnabled="False"
                             SelectionChanged="NavView_SelectionChanged"
                             BackRequested="NavView_BackRequested">
            <muxc:NavigationView.MenuItems>
                <muxc:NavigationViewItem Content="ViveTool" Tag="ViveTool">
                    <muxc:NavigationViewItem.Icon>
                        <SymbolIcon Symbol="Repair"/>
                    </muxc:NavigationViewItem.Icon>
                </muxc:NavigationViewItem>
                <muxc:NavigationViewItem Content="输出" Tag="Output">
                    <muxc:NavigationViewItem.Icon>
                        <SymbolIcon Symbol="Document"/>
                    </muxc:NavigationViewItem.Icon>
                </muxc:NavigationViewItem>
            </muxc:NavigationView.MenuItems>

            <Frame x:Name="ContentFrame"
                   Navigated="ContentFrame_Navigated"
                   HorizontalAlignment="Stretch"
                   VerticalAlignment="Stretch"/>
        </muxc:NavigationView>

        <!-- 顶部 InfoBar 覆盖层：跨两行，放在最后（天然位于最上层） -->
        <Grid x:Name="InfoBarOverlay"
              Grid.RowSpan="2"
              HorizontalAlignment="Stretch"
              VerticalAlignment="Top"
              IsHitTestVisible="False"
              Margin="0,8,0,0">
            <muxc:InfoBar x:Name="TopInfoBar"
                          IsOpen="False"
                          IsClosable="False"
                          Severity="Informational"
                          HorizontalAlignment="Center"
                          MaxWidth="980"
                          RenderTransformOrigin="0.5,0">
                <muxc:InfoBar.RenderTransform>
                    <TranslateTransform Y="-80"/>
                </muxc:InfoBar.RenderTransform>
            </muxc:InfoBar>
        </Grid>

        <!-- 假 Splash 覆盖层（UWP风格；使用包资源自动缩放的 SplashScreen.png） -->
        <Grid x:Name="SplashOverlay"
      Grid.RowSpan="2"
      Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
      Visibility="Collapsed"
      Opacity="0"
      IsHitTestVisible="False">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="12">
                <!-- 这里只定义 Image，不写 Source -->
                <Image x:Name="SplashImage"
               Width="220" Height="220"
               Stretch="UniformToFill"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>